var XcooBee=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=106)}([function(e,t,n){"use strict";var r=n(52),o={};o[n(2)("toStringTag")]="z",o+""!="[object z]"&&n(16)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(4),o=n(23),i=n(20),a=n(16),s=n(25),c=function(e,t,n){var u,f,p,l,h=e&c.F,d=e&c.G,y=e&c.S,v=e&c.P,g=e&c.B,_=d?r:y?r[t]||(r[t]={}):(r[t]||{}).prototype,m=d?o:o[t]||(o[t]={}),b=m.prototype||(m.prototype={});for(u in d&&(n=t),n)p=((f=!h&&_&&void 0!==_[u])?_:n)[u],l=g&&f?s(p,r):v&&"function"==typeof p?s(Function.call,p):p,_&&a(_,u,p,e&c.U),m[u]!=p&&i(m,u,l),v&&b[u]!=p&&(b[u]=p)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(48)("wks"),o=n(39),i=n(4).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r,o,i,a,s=n(40),c=n(4),u=n(25),f=n(52),p=n(1),l=n(11),h=n(29),d=n(122),y=n(123),v=n(124),g=n(92).set,_=n(125)(),m=n(94),b=n(126),w=n(127),x=n(128),E=c.TypeError,S=c.process,O=S&&S.versions,C=O&&O.v8||"",T=c.Promise,R="process"==f(S),A=function(){},P=o=m.f,k=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(2)("species")]=function(e){e(A,A)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;_((function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a,s=o?t.ok:t.fail,c=t.resolve,u=t.reject,f=t.domain;try{s?(o||(2==e._h&&N(e),e._h=1),!0===s?n=r:(f&&f.enter(),n=s(r),f&&(f.exit(),a=!0)),n===t.promise?u(E("Promise-chain cycle")):(i=I(n))?i.call(n,c,u):c(n)):u(r)}catch(e){f&&!a&&f.exit(),u(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&D(e)}))}},D=function(e){g.call(c,(function(){var t,n,r,o=e._v,i=U(e);if(i&&(t=b((function(){R?S.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=R||U(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},U=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){g.call(c,(function(){var t;R?S.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},$=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw E("Promise can't be resolved itself");(t=I(e))?_((function(){var r={_w:n,_d:!1};try{t.call(e,u($,r,1),u(L,r,1))}catch(e){L.call(r,e)}})):(n._v=e,n._s=1,j(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};k||(T=function(e){d(this,T,"Promise","_h"),h(e),r.call(this);try{e(u($,this,1),u(L,this,1))}catch(e){L.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(129)(T.prototype,{then:function(e,t){var n=P(v(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=u($,e,1),this.reject=u(L,e,1)},m.f=P=function(e){return e===T||e===a?new i(e):o(e)}),p(p.G+p.W+p.F*!k,{Promise:T}),n(50)(T,"Promise"),n(130)("Promise"),a=n(23).Promise,p(p.S+p.F*!k,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),p(p.S+p.F*(s||!k),"Promise",{resolve:function(e){return x(s&&this===a?T:this,e)}}),p(p.S+p.F*!(k&&n(95)((function(e){T.all(e).catch(A)}))),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,o=n.reject,i=b((function(){var n=[],i=0,a=1;y(e,!1,(function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--a||r(n))}),o)})),--a||r(n)}));return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,o=b((function(){y(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function l(){}function h(){}var d={};d[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(S([])));v&&v!==t&&n.call(v,o)&&(d=v);var g=h.prototype=p.prototype=Object.create(d);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var c=u(e[o],e,i);if("throw"!==c.type){var f=c.arg,p=f.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){f.value=e,a(f)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return l.prototype=g.constructor=h,h.constructor=l,l.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(m.prototype),m.prototype[i]=function(){return this},e.AsyncIterator=m,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new m(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(g),s(g,a,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(1);r(r.S+r.F*!n(12),"Object",{defineProperty:n(13).f})},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){for(var r=n(9),o=n(41),i=n(16),a=n(4),s=n(20),c=n(43),u=n(2),f=u("iterator"),p=u("toStringTag"),l=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=o(h),y=0;y<d.length;y++){var v,g=d[y],_=h[g],m=a[g],b=m&&m.prototype;if(b&&(b[f]||s(b,f,l),b[p]||s(b,p,g),c[g]=l,_))for(v in r)b[v]||i(b,v,r[v],!0)}},function(e,t,n){"use strict";var r=n(86),o=n(119),i=n(43),a=n(26);e.exports=n(87)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";n(44),n(19);var r=n(142).GraphQLClient,o=n(18),i=/^[\w:/=+]+$/,a=/^[-+\w]+(\.[-+\w]+)*@([-a-z0-9]+\.)+[a-z]{2,6}$/i,s=function(e){return"at line: ".concat(e.line,", column: ").concat(e.column)},c=function(e){var t=[];return e.message&&t.push(e.message),e.locations&&t.push(e.locations.map(s).join(", ")),0===t.length&&t.push(JSON.stringify(e)),t=t.join(" ")};e.exports={appearsToBeACursor:function(e){return i.test(e)},appearsToBeAnEmailAddress:function(e){return a.test(e)},assertAppearsToBeACampaignId:function(e){if(!function(e){return"string"==typeof e&&e.length>0}(e))throw new o("Campaign ID is required")},createClient:function(e,t){var n="".concat(e,"/graphql");return new r(n,{headers:{Authorization:"".concat(t)}})},transformError:function(e){if(e instanceof o)return e;var t=0;if(e.response&&"number"==typeof e.response.status&&(t=e.response.status),401===t)return new o("401 Unauthorized.  Please make sure your API access token is fresh.");if(e.response&&e.response.errors){var n=e.response.errors;Array.isArray(n)||(n=[n]);var r=n.map(c).join("\n");return new o(r)}return new o(e)}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(7),o=n(76),i=n(58),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r=n(4),o=n(24),i=n(12),a=n(1),s=n(16),c=n(82).KEY,u=n(15),f=n(48),p=n(50),l=n(39),h=n(2),d=n(83),y=n(84),v=n(117),g=n(66),_=n(7),m=n(11),b=n(34),w=n(26),x=n(58),E=n(38),S=n(51),O=n(118),C=n(63),T=n(62),R=n(13),A=n(41),P=C.f,k=R.f,I=O.f,j=r.Symbol,D=r.JSON,U=D&&D.stringify,N=h("_hidden"),L=h("toPrimitive"),$={}.propertyIsEnumerable,B=f("symbol-registry"),q=f("symbols"),F=f("op-symbols"),M=Object.prototype,K="function"==typeof j&&!!T.f,H=r.QObject,G=!H||!H.prototype||!H.prototype.findChild,V=i&&u((function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=P(M,t);r&&delete M[t],k(e,t,n),r&&e!==M&&k(M,t,r)}:k,z=function(e){var t=q[e]=S(j.prototype);return t._k=e,t},X=K&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},W=function(e,t,n){return e===M&&W(F,t,n),_(e),t=x(t,!0),_(n),o(q,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:E(0,!1)})):(o(e,N)||k(e,N,E(1,{})),e[N][t]=!0),V(e,t,n)):k(e,t,n)},Y=function(e,t){_(e);for(var n,r=v(t=w(t)),o=0,i=r.length;i>o;)W(e,n=r[o++],t[n]);return e},J=function(e){var t=$.call(this,e=x(e,!0));return!(this===M&&o(q,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(q,e)||o(this,N)&&this[N][e])||t)},Q=function(e,t){if(e=w(e),t=x(t,!0),e!==M||!o(q,t)||o(F,t)){var n=P(e,t);return!n||!o(q,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=I(w(e)),r=[],i=0;n.length>i;)o(q,t=n[i++])||t==N||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===M,r=I(n?F:w(e)),i=[],a=0;r.length>a;)!o(q,t=r[a++])||n&&!o(M,t)||i.push(q[t]);return i};K||(s((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=l(arguments.length>0?arguments[0]:void 0),t=function(n){this===M&&t.call(F,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),V(this,e,E(1,n))};return i&&G&&V(M,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",(function(){return this._k})),C.f=Q,R.f=W,n(61).f=O.f=Z,n(64).f=J,T.f=ee,i&&!n(40)&&s(M,"propertyIsEnumerable",J,!0),d.f=function(e){return z(h(e))}),a(a.G+a.W+a.F*!K,{Symbol:j});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var re=A(h.store),oe=0;re.length>oe;)y(re[oe++]);a(a.S+a.F*!K,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=j(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!K,"Object",{create:function(e,t){return void 0===t?S(e):Y(S(e),t)},defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ie=u((function(){T.f(1)}));a(a.S+a.F*ie,"Object",{getOwnPropertySymbols:function(e){return T.f(b(e))}}),D&&a(a.S+a.F*(!K||u((function(){var e=j();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(m(t)||void 0!==e)&&!X(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,U.apply(D,r)}}),j.prototype[L]||n(20)(j.prototype,L,j.prototype.valueOf),p(j,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(4),o=n(20),i=n(24),a=n(39)("src"),s=n(110),c=(""+s).split("toString");n(23).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){"use strict";var r=n(1),o=n(65)(0),i=n(67)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return(o=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(27),n(98),n(53),n(35),n(14),n(139),n(54),n(36),n(37),n(0),n(55),n(56);var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,n,r=(t=p,n=u(),function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function p(){var e;i(this,p);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),Error.captureStackTrace?Error.captureStackTrace(c(e),p):e.stack=o(Error,n).stack,e}return p}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));p.prototype.name="XcooBeeError",e.exports=p},function(e,t,n){"use strict";var r=n(1),o=n(65)(1);r(r.P+r.F*!n(67)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(13),o=n(38);e.exports=n(12)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r=n(1),o=n(65)(2);r(r.P+r.F*!n(67)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(34),o=n(41);n(88)("keys",(function(){return function(e){return o(r(e))}}))},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(79),o=n(32);e.exports=function(e){return r(o(e))}},function(e,t,n){"use strict";var r=n(97)(!0);n(87)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(35),n(14),n(54),n(36),n(37),n(0),n(55),n(56);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,{code:e,error:r})}return n}(n(70));e.exports=c},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(1);r(r.S+r.F*!n(12),"Object",{defineProperties:n(77)})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(1),o=n(114),i=n(26),a=n(63),s=n(81);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=i(e),c=a.f,u=o(r),f={},p=0;u.length>p;)void 0!==(n=c(r,t=u[p++]))&&s(f,t,n);return f}})},function(e,t,n){var r=n(32);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(84)("asyncIterator")},function(e,t,n){"use strict";n(140);var r=n(7),o=n(68),i=n(12),a=/./.toString,s=function(e){n(16)(RegExp.prototype,"toString",e,!0)};n(15)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){var r=Date.prototype,o=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(16)(r,"toString",(function(){var e=i.call(this);return e==e?o.call(this):"Invalid Date"}))},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(78),o=n(60);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(49),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){e.exports={}},function(e,t,n){var r=n(1);r(r.S,"Array",{isArray:n(66)})},function(e,t,n){var r=n(11),o=n(82).onFreeze;n(88)("freeze",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,c,"next",e)}function c(e){a(i,r,o,s,c,"throw",e)}s(void 0)}))}}n(30),n(33),n(17),n(21),n(14),n(8),n(9),n(22),n(6),n(5),n(3),n(0);var c=n(28),u=n(159);function f(){return(f=s(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(n,o(o({},r),{},{after:null}));case 3:return i=e.sent,a=new u(t,i,n,r),e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),new c(400,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}e.exports={resolveApiCfg:function(e,t){return e&&"apiKey"in e&&"apiSecret"in e&&"apiUrlRoot"in e?{apiKey:e.apiKey,apiSecret:e.apiSecret,apiUrlRoot:e.apiUrlRoot}:t&&"apiKey"in t&&"apiSecret"in t&&"apiUrlRoot"in t?{apiKey:t.apiKey,apiSecret:t.apiSecret,apiUrlRoot:t.apiUrlRoot}:null},resolveCampaignId:function(e,t,n){return e&&"string"==typeof e?e:t&&"string"==typeof t.campaignId?t.campaignId:n&&"string"==typeof n.campaignId?n.campaignId:null},resolveSdkCfg:function(e,t){return e&&"apiKey"in e&&"apiSecret"in e&&"apiUrlRoot"in e?{apiKey:e.apiKey,apiSecret:e.apiSecret,apiUrlRoot:e.apiUrlRoot,pgpPassword:e.pgpPassword,pgpSecret:e.pgpSecret}:t&&"apiKey"in t&&"apiSecret"in t&&"apiUrlRoot"in t?{apiKey:t.apiKey,apiSecret:t.apiSecret,apiUrlRoot:t.apiUrlRoot,pgpPassword:t.pgpPassword,pgpSecret:t.pgpSecret}:null},startPaging:function(e,t,n){return f.apply(this,arguments)}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(35),n(14),n(54),n(36),n(37),n(0),n(55),n(56);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=i(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,{code:200,error:null,result:e})}return n}(n(70));e.exports=c},function(e,t,n){var r=n(23),o=n(4),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(40)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(13).f,o=n(24),i=n(2)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(7),o=n(77),i=n(60),a=n(59)("IE_PROTO"),s=function(){},c=function(){var e,t=n(57)("iframe"),r=i.length;for(t.style.display="none",n(85).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(31),o=n(2)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(13).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(12)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,n){var r=n(1);r(r.S,"Object",{create:n(51)})},function(e,t,n){var r=n(1),o=n(51),i=n(29),a=n(7),s=n(11),c=n(15),u=n(99),f=(n(4).Reflect||{}).construct,p=c((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),l=!c((function(){f((function(){}))}));r(r.S+r.F*(p||l),"Reflect",{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(l&&!p)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,h=o(s(c)?c:Object.prototype),d=Function.apply.call(e,h,t);return s(d)?d:h}})},function(e,t,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(141).set})},function(e,t,n){var r=n(11),o=n(4).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(48)("keys"),o=n(39);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(78),o=n(60).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(64),o=n(38),i=n(26),a=n(58),s=n(24),c=n(76),u=Object.getOwnPropertyDescriptor;t.f=n(12)?u:function(e,t){if(e=i(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(25),o=n(79),i=n(34),a=n(42),s=n(115);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,p=6==e,l=5==e||p,h=t||s;return function(t,s,d){for(var y,v,g=i(t),_=o(g),m=r(s,d,3),b=a(_.length),w=0,x=n?h(t,b):c?h(t,0):void 0;b>w;w++)if((l||w in _)&&(v=m(y=_[w],w,g),e))if(n)x[w]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return w;case 2:x.push(y)}else if(f)return!1;return p?-1:u||f?f:x}}},function(e,t,n){var r=n(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(15);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){"use strict";var r=n(7);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(45);var r=Object.freeze(["bee_icon","invite_list","outbox","profile_image"]),o=Object.freeze({BEE_ICON:"bee_icon",INVITE_LIST:"invite_list",OUTBOX:"outbox",PROFILE_IMAGE:"profile_image",values:r});e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(3),n(30),n(33),n(17),n(21),n(14),n(8),n(9),n(0),n(22),n(6),n(5);var c=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw TypeError("Response `info` is required.");if(t.code<200||t.code>599)throw TypeError("`code` must be a valid HTTP status code.");if(t.code<300){if(null===t.result||void 0===t.result)throw TypeError("`result` is required for successful responses.")}else{if(null===t.error||void 0===t.error)throw TypeError("`error` is required for non-successful responses.");if(null===t.error.message||void 0===t.error.message)throw TypeError("`error.message` is required for non-successful responses.")}this._=i(i({},t),{},{time:new Date})}var t,n,o,a,c;return t=e,(n=[{key:"getNextPage",value:(a=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})),c=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=a.apply(e,t);function s(e){r(i,n,o,s,c,"next",e)}function c(e){r(i,n,o,s,c,"throw",e)}s(void 0)}))},function(){return c.apply(this,arguments)})},{key:"hasNextPage",value:function(){return!!this._.hasNextPage}},{key:"code",get:function(){return this._.code}},{key:"result",get:function(){return this._.result}},{key:"error",get:function(){return this._.error}},{key:"time",get:function(){return this._.time}}])&&s(t.prototype,n),o&&s(t,o),e}();e.exports=c},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}n(102),n(19),n(8),n(9),n(27),n(5),n(3),n(0);var i=n(152),a=n(104),s=n(158),c=n(18);function u(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;++o){var i=e[o]||null,a=t[o]||null;n.push({file:i,policy:a})}return n}function f(){return(f=o(regeneratorRuntime.mark((function e(t,n,r,o,f){var p,l,h,d,y,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.findEndPoint(t,n,r,o,"flex");case 2:if(p=e.sent){e.next=5;break}throw new c('Unable to find an endpoint named "'.concat(o,'" or "flex".'));case 5:return l=o,h=p.cursor,e.next=9,s.upload_policy(t,n,l,h,f);case 9:return d=e.sent,y=u(f,d),e.next=13,Promise.all(y.map((function(e){var t=e.file,n=e.policy;return a.upload_file(t,n).catch((function(e){return e}))})));case 13:return v=e.sent,g=y.map((function(e,t){var n=e.file,r=v[t];return r instanceof Error?{success:!1,error:r,file:n}:{success:!0,file:n.replace(/^.*[\\\/]/,""),filePath:n}})),e.abrupt("return",g);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={prepareFilePolicyPairs:u,upload:function(e,t,n,r,o){return f.apply(this,arguments)}}},function(e,t,n){"use strict";var r=n(1),o=n(80)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(86)("includes")},function(e,t,n){"use strict";var r=n(1),o=n(153);r(r.P+r.F*n(155)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}n(3),n(8),n(9),n(0),n(5);var o=n(166).fetchOpenpgp,i=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,r){var i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:return i=e.sent,e.next=6,i.key.readArmored(n);case 6:if(a=e.sent.keys[0],!r){e.next=10;break}return e.next=10,a.decrypt(r);case 10:return e.next=12,i.message.readArmored(t);case 12:return e.t0=e.sent,e.t1=[a],s={message:e.t0,privateKeys:e.t1},e.next=17,i.decrypt(s);case 17:return c=e.sent,e.abrupt("return",JSON.parse(c.data));case 21:return e.prev=21,e.t2=e.catch(0),e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})),function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();e.exports={decryptWithEncryptedPrivateKey:i}},function(e,t,n){var r;e.exports=(r=r||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){t=t;var n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=o(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},f=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,u=e.min(4*c,o);if(c){for(var f=0;f<c;f+=i)this._doProcessBlock(r,f);var p=r.splice(0,c);n.sigBytes-=u}return new a.init(p,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),l=(o.Hasher=p.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new l.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math),r)},function(e,t,n){e.exports=!n(12)&&!n(15)((function(){return 7!=Object.defineProperty(n(57)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(13),o=n(7),i=n(41);e.exports=n(12)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(24),o=n(26),i=n(80)(!1),a=n(59)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(26),o=n(42),i=n(113);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),f=i(a,u);if(e&&n!=n){for(;u>f;)if((s=c[f++])!=s)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(13),o=n(38);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(39)("meta"),o=n(11),i=n(24),a=n(13).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(15)((function(){return c(Object.preventExtensions({}))})),f=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},p=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";f(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;f(e)}return e[r].w},onFreeze:function(e){return u&&p.NEED&&c(e)&&!i(e,r)&&f(e),e}}},function(e,t,n){t.f=n(2)},function(e,t,n){var r=n(4),o=n(23),i=n(40),a=n(83),s=n(13).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(2)("unscopables"),o=Array.prototype;null==o[r]&&n(20)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t,n){"use strict";var r=n(40),o=n(1),i=n(16),a=n(20),s=n(43),c=n(120),u=n(50),f=n(121),p=n(2)("iterator"),l=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,d,y,v,g){c(n,t,d);var _,m,b,w=function(e){if(!l&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",E="values"==y,S=!1,O=e.prototype,C=O[p]||O["@@iterator"]||y&&O[y],T=C||w(y),R=y?E?w("entries"):T:void 0,A="Array"==t&&O.entries||C;if(A&&(b=f(A.call(new e)))!==Object.prototype&&b.next&&(u(b,x,!0),r||"function"==typeof b[p]||a(b,p,h)),E&&C&&"values"!==C.name&&(S=!0,T=function(){return C.call(this)}),r&&!g||!l&&!S&&O[p]||a(O,p,T),s[t]=T,s[x]=h,y)if(_={values:E?T:w("values"),keys:v?T:w("keys"),entries:R},g)for(m in _)m in O||i(O,m,_[m]);else o(o.P+o.F*(l||S),t,_);return _}},function(e,t,n){var r=n(1),o=n(23),i=n(15);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(7);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(43),o=n(2)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){var r=n(52),o=n(2)("iterator"),i=n(43);e.exports=n(23).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r,o,i,a=n(25),s=n(93),c=n(85),u=n(57),f=n(4),p=f.process,l=f.setImmediate,h=f.clearImmediate,d=f.MessageChannel,y=f.Dispatch,v=0,g={},_=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},m=function(e){_.call(e.data)};l&&h||(l=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete g[e]},"process"==n(31)(p)?r=function(e){p.nextTick(a(_,e,1))}:y&&y.now?r=function(e){y.now(a(_,e,1))}:d?(i=(o=new d).port2,o.port1.onmessage=m,r=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+"","*")},f.addEventListener("message",m,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),e.exports={set:l,clear:h}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var r=n(29);function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},function(e,t,n){var r=n(2)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){var r=function(e){function t(){this.fetch=!1}return t.prototype=e,new t}("undefined"!=typeof self?self:this);(function(e){!function(e){if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};d.prototype.append=function(e,t){e=p(e),t=l(t);var n=this.map[e];this.map[e]=n?n+","+t:t},d.prototype.delete=function(e){delete this.map[p(e)]},d.prototype.get=function(e){return e=p(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(p(e))},d.prototype.set=function(e,t){this.map[p(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var f=[301,302,303,307,308];x.redirect=function(e,t){if(-1===f.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=b,e.Response=x,e.fetch=function(e,t){return new Promise((function(n,o){var i=new b(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new x(o,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function p(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function _(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&r&&s(e))this._bodyArrayBuffer=_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!c(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=_(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=y(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=v(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(e,t){var n,r,o=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),u.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}(void 0!==e?e:this)}).call(r,void 0);var o=r.fetch;o.Response=r.Response,o.Request=r.Request,o.Headers=r.Headers;e.exports&&(e.exports=o,e.exports.default=o)},function(e,t,n){var r=n(49),o=n(32);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(25),o=n(1),i=n(34),a=n(89),s=n(90),c=n(42),u=n(81),f=n(91);o(o.S+o.F*!n(95)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,p,l=i(e),h="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,v=void 0!==y,g=0,_=f(l);if(v&&(y=r(y,d>2?arguments[2]:void 0,2)),null==_||h==Array&&s(_))for(n=new h(t=c(l.length));t>g;g++)u(n,g,v?y(l[g],g):l[g]);else for(p=_.call(l),n=new h;!(o=p.next()).done;g++)u(n,g,v?a(p,y,[o.value,g],!0):o.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(29),o=n(11),i=n(93),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(t,r.length,r):i(t,r,e)};return o(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(n,r){var o=this,i=t.extractMessage(n)+": "+JSON.stringify({response:n,request:r});return(o=e.call(this,i)||this).response=n,o.request=r,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return o(t,e),t.extractMessage=function(e){try{return e.errors[0].message}catch(t){return"GraphQL Error (Code: "+e.status+")"}},t}(Error);t.ClientError=i},function(e,t,n){"use strict";var r=n(10),o=function e(t,n){var o=n;if(o in e._.unfulfilledPromises)return e._.unfulfilledPromises[o];var i=r.createClient(t,n).request("\n    query {\n      user {\n        cursor\n        xcoobee_id\n        pgp_public_key\n      }\n    }\n  ").then((function(t){return delete e._.unfulfilledPromises[o],t.user})).catch((function(t){throw delete e._.unfulfilledPromises[o],r.transformError(t)}));return e._.unfulfilledPromises[o]=i,i};o._={unfulfilledPromises:{}},e.exports={getUser:o,getUserPublicKey:function(e,t,n){return r.createClient(e,t).request("\n    query getUserPublicKey($xid: String!) {\n      users(xcoobee_id: $xid) {\n          data {\n              pgp_public_key\n          }\n      }\n    }\n  ",{xid:n}).then((function(e){var t=e.users.data[0];return t&&t.pgp_public_key||""})).catch((function(e){throw r.transformError(e)}))}}},function(e,t,n){"use strict";var r=n(7),o=n(34),i=n(42),a=n(49),s=n(148),c=n(149),u=Math.max,f=Math.min,p=Math.floor,l=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(150)("replace",2,(function(e,t,n,d){return[function(r,o){var i=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(e,t){var o=d(n,e,this,t);if(o.done)return o.value;var p=r(e),l=String(this),h="function"==typeof t;h||(t=String(t));var v=p.global;if(v){var g=p.unicode;p.lastIndex=0}for(var _=[];;){var m=c(p,l);if(null===m)break;if(_.push(m),!v)break;""===String(m[0])&&(p.lastIndex=s(l,i(p.lastIndex),g))}for(var b,w="",x=0,E=0;E<_.length;E++){m=_[E];for(var S=String(m[0]),O=u(f(a(m.index),l.length),0),C=[],T=1;T<m.length;T++)C.push(void 0===(b=m[T])?b:String(b));var R=m.groups;if(h){var A=[S].concat(C,O,l);void 0!==R&&A.push(R);var P=String(t.apply(void 0,A))}else P=y(S,l,O,C,R,t);O>=x&&(w+=l.slice(x,O)+P,x=O+S.length)}return w+l.slice(x)}];function y(e,t,r,i,a,s){var c=r+e.length,u=i.length,f=h;return void 0!==a&&(a=o(a),f=l),n.call(s,f,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var f=+o;if(0===f)return n;if(f>u){var l=p(f/10);return 0===l?n:l<=u?void 0===i[l-1]?o.charAt(1):i[l-1]+o.charAt(1):n}s=i[f-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r,o,i=n(68),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=void 0!==/()??/.exec("")[1];(u||f)&&(c=function(e){var t,n,r,o,c=this;return f&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(t=c.lastIndex),r=a.call(c,e),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),f&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},function(e,t,n){"use strict";n(3),n(0);var r=n(105),o=n(157),i=n(18),a=n(10);e.exports={upload_file:function(e,t){var n=t.upload_url,s=new o;return s.append("key",t.key),s.append("acl","private"),s.append("X-Amz-Algorithm","AWS4-HMAC-SHA256"),s.append("X-Amz-Credential",t.credential),s.append("X-Amz-Date",t.date),s.append("X-Amz-meta-identifier",t.identifier),s.append("Policy",t.policy),s.append("X-Amz-Signature",t.signature),"function"==typeof File&&e instanceof File?s.append("file",e):s.append("file",r.createReadStream(e)),new Promise((function(r){var o=function(n,o,s){if(n)throw a.transformError(n);if(s>=300)throw new i("Failed to upload file at: ".concat(e," using policy: ").concat(JSON.stringify(t)));r(o)};if("function"==typeof s.submit)s.submit(n,(function(e,t){return o(e,t,t.statusCode)}));else{var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&o(null,c.responseText,c.status)},c.open("POST",n),c.send(s)}}))}}},function(e,t){},function(e,t,n){n(5),e.exports=n(107)},function(e,t,n){"use strict";var r=n(108),o=n(111),i=n(178);e.exports={sdk:{Config:r,Sdk:o,Utilities:i}}},function(e,t,n){"use strict";(function(t){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(6);var o=function(){function e(n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw TypeError("Config `data` is required.");var r,o=n.apiKey,i=n.apiSecret;r=t.env&&t.env.API_URL?t.env.API_URL:n.apiUrlRoot?n.apiUrlRoot:"https://api.xcoobee.net";var a=n.campaignId,s=n.encrypt,c=n.pgpPassword,u=n.pgpSecret;if(a=void 0===a?null:a,s=void 0!==s&&s,c=void 0===c?null:c,u=void 0===u?null:u,!o||"string"!=typeof o)throw new TypeError("API key is required.");if(!i||"string"!=typeof i)throw new TypeError("API secret is required.");if(!r||"string"!=typeof r)throw new TypeError("API URL root is required.");if(null!==a&&"string"!=typeof a||"string"==typeof a&&0===a.length)throw new TypeError("Default campaign ID must be null or a valid campaign ID.");if(s){if(!c)throw new TypeError("PGP password is required when encrypt is true.");if(!u)throw new TypeError("PGP secret is required when encrypt is true.")}this._={apiKey:o,apiSecret:i,apiUrlRoot:r,campaignId:a,encrypt:s,pgpPassword:c,pgpSecret:u}}var n,o,i;return n=e,(o=[{key:"apiKey",get:function(){return this._.apiKey}},{key:"apiSecret",get:function(){return this._.apiSecret}},{key:"apiUrlRoot",get:function(){return this._.apiUrlRoot}},{key:"campaignId",get:function(){return this._.campaignId}},{key:"encrypt",get:function(){return this._.encrypt}},{key:"pgpPassword",get:function(){return this._.pgpPassword}},{key:"pgpSecret",get:function(){return this._.pgpSecret}}])&&r(n.prototype,o),i&&r(n,i),e}();e.exports=o}).call(this,n(109))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],f=!1,p=-1;function l(){f&&c&&(f=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!f){var e=s(l);f=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||f||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){e.exports=n(48)("native-function-to-string",Function.toString)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(6);var o=n(112),i=n(144),a=n(145),s=n(160),c=n(167),u=n(169),f=n(175),p=new o,l=new i(p),h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.config=t)}var t,n,o;return t=e,(n=[{key:"bees",get:function(){return this._.bees}},{key:"config",get:function(){return this._.config},set:function(e){this._.bees.config=e,this._.consents.config=e,this._.inbox.config=e,this._.system.config=e,this._.users.config=e,this._.config=e}},{key:"consents",get:function(){return this._.consents}},{key:"inbox",get:function(){return this._.inbox}},{key:"system",get:function(){return this._.system}},{key:"users",get:function(){return this._.users}}])&&r(t.prototype,n),o&&r(t,o),e}();h.prototype._={config:null,bees:new a(null,p,l),consents:new s(null,p,l),inbox:new c(null,p,l),system:new u(null,p,l),users:new f(null,p,l)},e.exports=h},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(30),n(33),n(17),n(21),n(14),n(8),n(9),n(22),n(6),n(3),n(0),n(131);var s=n(132),c=n(135),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._={cfg:o({},t||{}),internalCache:{}}}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t,n,r){var o=this;if(!e)throw new TypeError("apiUrlRoot is required.");if(!t)throw new TypeError("apiKey is required.");if(!n)throw new TypeError("apiSecret is required.");if("string"!=typeof e)throw new TypeError("apiUrlRoot must be a string.");if("string"!=typeof t)throw new TypeError("apiKey must be a string.");if("string"!=typeof n)throw new TypeError("apiSecret must be a string.");var i="".concat(e,":").concat(t,":").concat(n);if(!0!==r&&i in this._.internalCache){var a=this._.internalCache[i],u=s(a).exp,f=Date.now();if(("number"==typeof u?1e3*u:f)-f>(this._.cfg.expTol||1e4))return Promise.resolve(a)}return c.getApiAccessToken({apiKey:t,apiSecret:n,apiUrlRoot:e}).then((function(e){return o._.internalCache[i]=e,e}))}}])&&a(t.prototype,n),r&&a(t,r),e}();e.exports=u},function(e,t,n){var r=n(49),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(61),o=n(62),i=n(7),a=n(4).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(i(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(116);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),o=n(66),i=n(2)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(41),o=n(62),i=n(64);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),c=i.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(26),o=n(61).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(51),o=n(38),i=n(50),a={};n(20)(a,n(2)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(24),o=n(34),i=n(59)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(25),o=n(89),i=n(90),a=n(7),s=n(42),c=n(91),u={},f={};(t=e.exports=function(e,t,n,p,l){var h,d,y,v,g=l?function(){return e}:c(e),_=r(n,p,t?2:1),m=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(h=s(e.length);h>m;m++)if((v=t?_(a(d=e[m])[0],d[1]):_(e[m]))===u||v===f)return v}else for(y=g.call(e);!(d=y.next()).done;)if((v=o(y,_,d.value,t))===u||v===f)return v}).BREAK=u,t.RETURN=f},function(e,t,n){var r=n(7),o=n(29),i=n(2)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r=n(4),o=n(92).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(31)(a);e.exports=function(){var e,t,n,u=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var f=s.resolve(void 0);n=function(){f.then(u)}}else n=function(){o.call(r,u)};else{var p=!0,l=document.createTextNode("");new i(u).observe(l,{characterData:!0}),n=function(){l.data=p=!p}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(4).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(7),o=n(11),i=n(94);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(16);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(4),o=n(13),i=n(12),a=n(2)("species");e.exports=function(e){var t=r[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(133);function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new o("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(r(e.split(".")[n]))}catch(e){throw new o("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=o},function(e,t,n){var r=n(134);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return r(t)}}},function(e,t){function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,a=0,s="";o=t.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s}},function(e,t,n){"use strict";n(136);var r=n(96),o=n(18),i=n(10),a="Unable to get an API access token.",s=function e(t){var n=t.apiKey,s=t.apiSecret,c=t.apiUrlRoot,u="".concat(n,":").concat(s);if(u in e._.unfulfilledPromises)return e._.unfulfilledPromises[u];var f="".concat(c,"/get_token"),p=r(f,{method:"POST",body:JSON.stringify({key:n,secret:s}),headers:{"Content-Type":"application/json;charset=utf-8"},timeout:3e4}).then((function(t){return delete e._.unfulfilledPromises[u],t.json().then((function(e){var n=[];if(e){if(t.ok?"string"==typeof e.errorType&&e.errorType.length>0?e.errorMessage?n.push(e.errorMessage):n.push(a):"string"==typeof e.token&&0!==e.token.trim().length||n.push(a):403===t.status?(n.push("Forbidden."),e.message&&n.push(e.message)):n.push(a),0===n.length)return e.token.trim()}else n.push(a);throw new o(n.join(" "))}))})).catch((function(t){throw delete e._.unfulfilledPromises[u],i.transformError(t)}));return e._.unfulfilledPromises[u]=p,p};s._={unfulfilledPromises:{}},e.exports={getApiAccessToken:s}},function(e,t,n){"use strict";n(137)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){var r=n(1),o=n(32),i=n(15),a=n(138),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),f=function(e,t,n){var o={},s=i((function(){return!!a[e]()||"​"!="​"[e]()})),c=o[e]=s?t(p):a[e];n&&(o[n]=c),r(r.P+r.F*s,"String",o)},p=f.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=f},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(1);r(r.P,"Function",{bind:n(99)})},function(e,t,n){n(12)&&"g"!=/./g.flags&&n(13).f(RegExp.prototype,"flags",{configurable:!0,get:n(68)})},function(e,t,n){var r=n(11),o=n(7),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(25)(Function.call,n(63).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n(100),c=n(100);t.ClientError=c.ClientError,n(143);var u=function(){function e(e,t){this.url=e,this.options=t||{}}return e.prototype.rawRequest=function(e,t){return o(this,void 0,void 0,(function(){var n,o,c,u,f,l,h,d,y;return i(this,(function(i){switch(i.label){case 0:return n=this.options,o=n.headers,c=a(n,["headers"]),u=JSON.stringify({query:e,variables:t||void 0}),[4,fetch(this.url,r({method:"POST",headers:Object.assign({"Content-Type":"application/json"},o),body:u},c))];case 1:return[4,p(f=i.sent())];case 2:if(l=i.sent(),f.ok&&!l.errors&&l.data)return h=f.headers,d=f.status,[2,r({},l,{headers:h,status:d})];throw y="string"==typeof l?{error:l}:l,new s.ClientError(r({},y,{status:f.status,headers:f.headers}),{query:e,variables:t})}}))}))},e.prototype.request=function(e,t){return o(this,void 0,void 0,(function(){var n,o,c,u,f,l,h;return i(this,(function(i){switch(i.label){case 0:return n=this.options,o=n.headers,c=a(n,["headers"]),u=JSON.stringify({query:e,variables:t||void 0}),[4,fetch(this.url,r({method:"POST",headers:Object.assign({"Content-Type":"application/json"},o),body:u},c))];case 1:return[4,p(f=i.sent())];case 2:if(l=i.sent(),f.ok&&!l.errors&&l.data)return[2,l.data];throw h="string"==typeof l?{error:l}:l,new s.ClientError(r({},h,{status:f.status}),{query:e,variables:t})}}))}))},e.prototype.setHeaders=function(e){return this.options.headers=e,this},e.prototype.setHeader=function(e,t){var n,r=this.options.headers;return r?r[e]=t:this.options.headers=((n={})[e]=t,n),this},e}();function f(e,t,n){return o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,new u(e).request(t,n)]}))}))}function p(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){return(t=e.headers.get("Content-Type"))&&t.startsWith("application/json")?[2,e.json()]:[2,e.text()]}))}))}t.GraphQLClient=u,t.rawRequest=function(e,t,n){return o(this,void 0,void 0,(function(){return i(this,(function(r){return[2,new u(e).rawRequest(t,n)]}))}))},t.request=f,t.default=f},function(e,t){!function(e){if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};d.prototype.append=function(e,t){e=p(e),t=l(t);var n=this.map[e];this.map[e]=n?n+","+t:t},d.prototype.delete=function(e){delete this.map[p(e)]},d.prototype.get=function(e){return e=p(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(p(e))},d.prototype.set=function(e,t){this.map[p(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var f=[301,302,303,307,308];x.redirect=function(e,t){if(-1===f.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=b,e.Response=x,e.fetch=function(e,t){return new Promise((function(n,o){var i=new b(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new x(o,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function p(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function _(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&r&&s(e))this._bodyArrayBuffer=_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!c(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=_(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=y(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=v(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(e,t){var n,r,o=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),u.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(6),n(3),n(0);var o=n(101),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._={apiAccessTokenCache:t,internalCache:{}}}var t,n,i;return t=e,(n=[{key:"get",value:function(e,t,n,r){var i=this,a="".concat(t,":").concat(n);if(!0!==r&&a in this._.internalCache){var s=this._.internalCache[a];return Promise.resolve(s)}return this._.apiAccessTokenCache.get(e,t,n).then((function(r){return o.getUser(e,r).then((function(e){return i._.internalCache[a]=e,e})).catch((function(){return i._.apiAccessTokenCache.get(e,t,n,!0).then((function(t){return o.getUser(e,t).then((function(e){return i._.internalCache[a]=e,e}))}))}))}))}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports=i},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(35),n(14),n(3),n(6),n(21),n(44),n(8),n(9),n(0),n(22),n(19),n(5);var s=n(10),c=n(146),u=n(147),f=n(69),p=n(28),l=n(71),h=n(46),d=n(47),y=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._={apiAccessTokenCache:n,config:t||null,usersCache:r}}var t,n,o,y,v,g;return t=e,(n=[{key:"_assertValidState",value:function(){if(!this._.config)throw TypeError("Illegal State: Default config has not been set yet.")}},{key:"listBees",value:(g=i(regeneratorRuntime.mark((function e(){var t,n,r,o,a,s=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:null,n=u.length>1&&void 0!==u[1]?u[1]:null,this._assertValidState(),r=function(){var e=i(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,u,f,p,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,o=t.apiSecret,i=t.apiUrlRoot,a=n.after,u=n.limit,f=n.searchText,e.next=4,s._.apiAccessTokenCache.get(i,r,o);case 4:return p=e.sent,e.next=7,c.bees(i,p,f,a,u);case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=h.resolveApiCfg(n,this._.config),a={searchText:t},e.abrupt("return",h.startPaging(r,o,a));case 7:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"takeOff",value:(v=i(regeneratorRuntime.mark((function e(t,n,o){var i,a,c,f,l,y,v,g,_,m=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.length>3&&void 0!==m[3]?m[3]:null,this._assertValidState(),a=h.resolveApiCfg(i,this._.config),c=a.apiKey,f=a.apiSecret,l=a.apiUrlRoot,y={filenames:n.process.fileNames,user_reference:n.process.userReference||null},o&&(y.subscriptions=o),n.custom&&"object"===r(n.custom)&&(y.custom=Object.keys(n.custom).map((function(e){return{name:e,value:n.custom[e]}}))),Array.isArray(n.process.destinations)&&n.process.destinations.length>0&&(y.destinations=n.process.destinations.map((function(e){return s.appearsToBeAnEmailAddress(e)?{email:e}:{xcoobee_id:e}}))),y.bees=Object.keys(t).map((function(e){return"transfer"!==e?{bee_name:e,params:JSON.stringify(t[e])}:null})).filter(Boolean),e.prev=9,e.next=12,this._.apiAccessTokenCache.get(l,c,f);case 12:return v=e.sent,e.next=15,u.addDirective(l,v,y);case 15:return g=e.sent,_=new d({ref_id:g}),e.abrupt("return",_);case 20:throw e.prev=20,e.t0=e.catch(9),new p(400,e.t0);case 23:case"end":return e.stop()}}),e,this,[[9,20]])}))),function(e,t,n){return v.apply(this,arguments)})},{key:"uploadFiles",value:(y=i(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,u,y,v,g,_=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:f.OUTBOX,r=_.length>2&&void 0!==_[2]?_[2]:null,this._assertValidState(),o=h.resolveApiCfg(r,this._.config),i=o.apiKey,a=o.apiSecret,s=o.apiUrlRoot,e.prev=5,e.next=8,this._.apiAccessTokenCache.get(s,i,a);case 8:return c=e.sent,e.next=11,this._.usersCache.get(s,i,a);case 11:return u=e.sent,y=u.cursor,e.next=15,l.upload(s,c,y,n,t);case 15:return v=e.sent,g=new d(v),e.abrupt("return",g);case 20:throw e.prev=20,e.t0=e.catch(5),new p(400,e.t0);case 23:case"end":return e.stop()}}),e,this,[[5,20]])}))),function(e){return y.apply(this,arguments)})},{key:"config",set:function(e){this._.config=e}}])&&a(t.prototype,n),o&&a(t,o),e}();e.exports=y},function(e,t,n){"use strict";var r=n(10);e.exports={bees:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="\n    query getBees($searchText: String, $after: String, $first: Int) {\n      bees(search: $searchText, after: $after, first: $first) {\n        data {\n          bee_icon\n          bee_system_name\n          category\n          cursor\n          date_c,\n          description\n          input_extensions\n          input_file_types\n          is_file_reader\n          label\n          max_filesize\n          output_extensions\n          output_file_types\n          owner_cursor\n          owner_xcoobee_id\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ";return r.createClient(e,t).request(a,{after:o,first:i,searchText:n}).then((function(e){return e.bees})).catch((function(e){throw r.transformError(e)}))}}},function(e,t,n){"use strict";var r=n(10);e.exports={addDirective:function(e,t,n){return r.createClient(e,t).request("\n    mutation addDirective($directiveInput: DirectiveInput!) {\n      add_directive(params: $directiveInput) {\n        ref_id\n      }\n    }\n  ",{directiveInput:n}).then((function(e){return e.add_directive.ref_id})).catch((function(e){throw r.transformError(e)}))}}},function(e,t,n){"use strict";var r=n(97)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r=n(52),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";n(151);var r=n(16),o=n(20),i=n(15),a=n(32),s=n(2),c=n(103),u=s("species"),f=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),p=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var l=s(e),h=!i((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})),d=h?!i((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[l](""),!t})):void 0;if(!h||!d||"replace"===e&&!f||"split"===e&&!p){var y=/./[l],v=n(a,l,""[e],(function(e,t,n,r,o){return t.exec===c?h&&!o?{done:!0,value:y.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=v[0],_=v[1];r(String.prototype,e,g),o(RegExp.prototype,l,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}}},function(e,t,n){"use strict";var r=n(103);n(1)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}n(53),n(72),n(73),n(21),n(5),n(3),n(0);var i=n(156),a=n(18);function s(){return(s=o(regeneratorRuntime.mark((function e(t,n,r,o,s){var c,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.outbox_endpoints(t,n,r);case 2:if(c=e.sent,u=c.data,!(f=u.filter((function(e){return[o,s].includes(e.name)}))).length){e.next=7;break}return e.abrupt("return",f[0]);case 7:throw new a("Unable to find an endpoint named ".concat(o," or the fallback end point."));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={findEndPoint:function(e,t,n,r,o){return s.apply(this,arguments)}}},function(e,t,n){var r=n(154),o=n(32);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(11),o=n(31),i=n(2)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(2)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";var r=n(10);e.exports={outbox_endpoints:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="\n    query getOutboxEndpoints($userCursor: String!) {\n      outbox_endpoints(user_cursor: $userCursor) {\n        data {\n          cursor\n          date_c\n          name\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ";return r.createClient(e,t).request(a,{after:o,first:i,userCursor:n}).then((function(e){return e.outbox_endpoints})).catch((function(e){throw r.transformError(e)}))}}},function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},function(e,t,n){"use strict";n(53),n(17),n(44),n(8),n(9),n(0),n(72),n(73);var r=n(105),o=n(10),i=n(69);e.exports={upload_policy:function(e,t,n,a,s){if(!i.values.includes(n))throw new TypeError("'intent' must be one of ".concat(i.values.join(", "),"."));if(!o.appearsToBeACursor(a))throw new TypeError("`endPointCursor` is required.");if(!Array.isArray(s))throw new TypeError("`files` must be an array.");var c=["query uploadPolicy {"];return s.forEach((function(e,t){var o;o="function"==typeof File&&e instanceof File?e.name:r.basename(e),c.push("  policy".concat(t,': upload_policy(filePath: "').concat(o,'", intent: ').concat(n,', identifier: "').concat(a,'") {')),c.push("    credential"),c.push("    date"),c.push("    identifier"),c.push("    key"),c.push("    policy"),c.push("    signature"),c.push("    upload_url"),c.push("  }")})),c.push("}"),c=c.join("\n"),o.createClient(e,t).request(c).then((function(e){for(var t=[],n=0,r=s.length;n<r;++n){var o=null,i="policy".concat(n);e[i]&&(o=e[i]),t.push(o)}return t})).catch((function(e){throw o.transformError(e)}))}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(35),n(30),n(33),n(17),n(21),n(14),n(8),n(9),n(22),n(3),n(6),n(54),n(36),n(37),n(0),n(55),n(56),n(5);var h=n(28),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,e);var t,n,r,o,a,p=f(l);function l(e,t,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),p.call(this,{apiCfg:n,code:200,currentPage:t,error:null,fetcher:e,hasNextPage:t.page_info.has_next_page,params:r,result:t})}return t=l,(n=[{key:"getNextPage",value:(o=regeneratorRuntime.mark((function e(){var t,n,r,o,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasNextPage()){e.next=13;break}return t=this._,n=t.apiCfg,r=t.currentPage,o=t.fetcher,a=t.params,s=i(i({},a),{},{after:r.page_info.end_cursor}),e.prev=3,e.next=6,this._.fetcher(n,s);case 6:return c=e.sent,e.abrupt("return",new l(o,c,n,a));case 10:throw e.prev=10,e.t0=e.catch(3),new h(400,e.t0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){s(i,n,r,a,c,"next",e)}function c(e){s(i,n,r,a,c,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})}])&&c(t.prototype,n),r&&c(t,r),l}(n(70));e.exports=d},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(27),n(98),n(53),n(36),n(37),n(8),n(35),n(14),n(44),n(3),n(0),n(6),n(17),n(5);var c=n(161),u=n(162),f=n(69),p=n(18),l=n(28),h=n(71),d=n(46),y=n(47),v=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._={apiAccessTokenCache:n,config:t||null,usersCache:r}}var t,n,o,i,v,g,_,m,b,w,x,E,S,O,C,T,R,A;return t=e,(n=[{key:"_assertValidState",value:function(){if(!this._.config)throw TypeError("Illegal State: Default config has not been set yet.")}},{key:"confirmConsentChange",value:(A=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:null,this._assertValidState(),r=d.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return s=e.sent,e.next=10,u.confirmConsentChange(a,s,t);case 10:return c=e.sent,f=new y(c),e.abrupt("return",f);case 15:throw e.prev=15,e.t0=e.catch(4),new l(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return A.apply(this,arguments)})},{key:"declineConsentChange",value:(R=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:null,this._assertValidState(),r=d.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return s=e.sent,e.next=10,u.declineConsentChange(a,s,t);case 10:return c=e.sent,f=new y(c),e.abrupt("return",f);case 15:throw e.prev=15,e.t0=e.catch(4),new l(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return R.apply(this,arguments)})},{key:"confirmDataDelete",value:(T=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:null,this._assertValidState(),r=d.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return s=e.sent,e.next=10,u.confirmDataDelete(a,s,t);case 10:return c=e.sent,f=new y(c),e.abrupt("return",f);case 15:throw e.prev=15,e.t0=e.catch(4),new l(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return T.apply(this,arguments)})},{key:"getCampaignInfo",value:(C=a(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,u,f,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:null,n=h.length>1&&void 0!==h[1]?h[1]:null,this._assertValidState(),r=d.resolveCampaignId(t,n,this._.config),o=d.resolveApiCfg(n,this._.config),i=o.apiKey,a=o.apiSecret,s=o.apiUrlRoot,e.prev=6,e.next=9,this._.apiAccessTokenCache.get(s,i,a);case 9:return u=e.sent,e.next=12,c.getCampaignInfo(s,u,r);case 12:return f=e.sent,p=new y(f),e.abrupt("return",p);case 17:throw e.prev=17,e.t0=e.catch(6),new l(400,e.t0);case 20:case"end":return e.stop()}}),e,this,[[6,17]])}))),function(){return C.apply(this,arguments)})},{key:"getConsentData",value:(O=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:null,this._assertValidState(),r=d.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return s=e.sent,e.next=10,u.getConsentData(a,s,t);case 10:return c=e.sent,f=new y(c),e.abrupt("return",f);case 15:throw e.prev=15,e.t0=e.catch(4),new l(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return O.apply(this,arguments)})},{key:"getCookieConsent",value:(S=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p,h,v,g,_=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:null,r=_.length>2&&void 0!==_[2]?_[2]:null,this._assertValidState(),o=d.resolveCampaignId(n,r,this._.config),i=d.resolveApiCfg(r,this._.config),a=i.apiKey,s=i.apiSecret,c=i.apiUrlRoot,e.prev=6,e.next=9,this._.apiAccessTokenCache.get(c,a,s);case 9:return f=e.sent,e.next=12,this._.usersCache.get(c,a,s);case 12:return p=e.sent,h=p.cursor,e.next=16,u.getCookieConsent(c,f,t,h,o);case 16:return v=e.sent,g=new y(v),e.abrupt("return",g);case 21:throw e.prev=21,e.t0=e.catch(6),new l(400,e.t0);case 24:case"end":return e.stop()}}),e,this,[[6,21]])}))),function(e){return S.apply(this,arguments)})},{key:"listCampaigns",value:(E=a(regeneratorRuntime.mark((function e(){var t,n,r,o=this,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:null,this._assertValidState(),n=function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,u,f,p,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,i=t.apiSecret,a=t.apiUrlRoot,s=n.after,u=n.limit,e.next=4,o._.apiAccessTokenCache.get(a,r,i);case 4:return f=e.sent,e.next=7,o._.usersCache.get(a,r,i);case 7:return p=e.sent,l=p.cursor,e.next=11,c.getCampaigns(a,f,l,s,u);case 11:return h=e.sent,e.abrupt("return",h);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r=d.resolveApiCfg(t,this._.config),e.abrupt("return",d.startPaging(n,r,{}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"listConsents",value:(x=a(regeneratorRuntime.mark((function e(){var t,n,r,o,i=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=s.length>1&&void 0!==s[1]?s[1]:null,this._assertValidState(),r=function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,o,a,s,c,f,p,l,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,o=t.apiSecret,a=t.apiUrlRoot,s=n.after,c=n.limit,f=n.filters,e.next=4,i._.apiAccessTokenCache.get(a,r,o);case 4:return p=e.sent,e.next=7,i._.usersCache.get(a,r,o);case 7:return l=e.sent,h=l.cursor,e.next=11,u.listConsents(a,p,h,f,s,c);case 11:return d=e.sent,e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=d.resolveApiCfg(n,this._.config),e.abrupt("return",d.startPaging(r,o,{filters:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"requestConsent",value:(w=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p,h,v,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>1&&void 0!==g[1]?g[1]:null,r=g.length>2&&void 0!==g[2]?g[2]:null,o=g.length>3&&void 0!==g[3]?g[3]:null,this._assertValidState(),i=d.resolveCampaignId(r,o,this._.config),a=d.resolveApiCfg(o,this._.config),s=a.apiKey,c=a.apiSecret,f=a.apiUrlRoot,e.prev=7,e.next=10,this._.apiAccessTokenCache.get(f,s,c);case 10:return p=e.sent,e.next=13,u.requestConsent(f,p,t,i,n);case 13:return h=e.sent,v=new y(h),e.abrupt("return",v);case 18:throw e.prev=18,e.t0=e.catch(7),new l(400,e.t0);case 21:case"end":return e.stop()}}),e,this,[[7,18]])}))),function(e){return w.apply(this,arguments)})},{key:"setUserDataResponse",value:(b=a(regeneratorRuntime.mark((function e(t,n,r,o,i){var a,s,c,v,g,_,m,b,w,x,E,S,O,C,T,R,A,P=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P.length>5&&void 0!==P[5]?P[5]:null,this._assertValidState(),s=d.resolveApiCfg(a,this._.config),c=s.apiKey,v=s.apiSecret,g=s.apiUrlRoot,_=[],m=[],e.prev=6,e.next=9,this._.apiAccessTokenCache.get(g,c,v);case 9:return w=e.sent,e.next=12,this._.usersCache.get(g,c,v);case 12:if(x=e.sent,E=x.cursor,S={progress:m,ref_id:null},!n||!r){e.next=28;break}return O=f.OUTBOX,e.next=19,h.upload(g,w,E,O,[r]);case 19:if(C=e.sent,T=[],C.forEach((function(e){var t=e.error,n=e.file;e.success?(T.push(n),m.push("successfully uploaded ".concat(n))):(_.push("Failed to upload file: ".concat(n,". Error: ").concat(t,".")),m.push("failed upload on ".concat(n)))})),!(T.length>0)){e.next=28;break}return e.next=25,u.setUserDataResponse(g,w,t,n,r,o,i);case 25:R=e.sent,m.push("successfully sent data response"),S.ref_id=R;case 28:b=new y(S),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(6),_.push(e.t0.message);case 34:if(!(_.length>0)){e.next=37;break}throw A=_.join(" "),new l(400,new p(A));case 37:return e.abrupt("return",b);case 38:case"end":return e.stop()}}),e,this,[[6,31]])}))),function(e,t,n,r,o){return b.apply(this,arguments)})},{key:"getDataPackage",value:(m=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p,h,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:null,this._assertValidState(),r=d.resolveSdkCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,s=r.pgpPassword,c=r.pgpSecret,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return f=e.sent,e.next=10,u.getDataPackage(a,f,t,c,s);case 10:return p=e.sent,h=new y(p),e.abrupt("return",h);case 15:throw e.prev=15,e.t0=e.catch(4),new l(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return m.apply(this,arguments)})},{key:"registerConsents",value:(_=a(regeneratorRuntime.mark((function e(){var t,n,o,i,a,s,c,p,v,g,_,m,b,w,x,E,S,O,C=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C.length>0&&void 0!==C[0]?C[0]:null,n=C.length>1&&void 0!==C[1]?C[1]:[],o=C.length>2&&void 0!==C[2]?C[2]:null,i=C.length>3&&void 0!==C[3]?C[3]:null,a=C.length>4&&void 0!==C[4]?C[4]:null,this._assertValidState(),t||n&&n.length){e.next=8;break}throw new TypeError("At least one of arguments [filename, targets] must be provided");case 8:return s=d.resolveCampaignId(i,a,this._.config),c=d.resolveSdkCfg(a,this._.config),p=c.apiKey,v=c.apiSecret,g=c.apiUrlRoot,e.next=13,this._.apiAccessTokenCache.get(g,p,v);case 13:return _=e.sent,e.next=16,this._.usersCache.get(g,p,v);case 16:if(m=e.sent,b=m.cursor,!t){e.next=27;break}return w=f.OUTBOX,e.next=22,h.upload(g,_,b,w,[t]);case 22:if(x=e.sent,E=r(x,1),(S=E[0])&&!S.error){e.next=27;break}throw new l(400,{message:"Failed to upload file"});case 27:return e.next=29,u.registerConsents(g,_,s,t,n,o);case 29:return O=e.sent,e.abrupt("return",new y(O));case 31:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"getCampaignIdByRef",value:(g=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,u,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:null,this._assertValidState(),r=d.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return s=e.sent,e.next=10,c.getCampaignIdByRef(a,s,t);case 10:return u=e.sent,f=new y(u),e.abrupt("return",f);case 15:throw e.prev=15,e.t0=e.catch(4),new l(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return g.apply(this,arguments)})},{key:"shareConsents",value:(v=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,u,f,p,h,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:null,r=v.length>2&&void 0!==v[2]?v[2]:[],o=v.length>3&&void 0!==v[3]?v[3]:null,this._assertValidState(),i=d.resolveApiCfg(o,this._.config),a=i.apiKey,s=i.apiSecret,u=i.apiUrlRoot,e.prev=6,e.next=9,this._.apiAccessTokenCache.get(u,a,s);case 9:return f=e.sent,e.next=12,c.shareConsents(u,f,t,n,r);case 12:return p=e.sent,h=new y(p),e.abrupt("return",h);case 17:throw e.prev=17,e.t0=e.catch(6),new l(400,e.t0);case 20:case"end":return e.stop()}}),e,this,[[6,17]])}))),function(e){return v.apply(this,arguments)})},{key:"dontSellData",value:(i=a(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,c,f,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(h.length>1&&void 0!==h[1])||h[1],r=h.length>2&&void 0!==h[2]?h[2]:null,this._assertValidState(),o=d.resolveApiCfg(r,this._.config),i=o.apiKey,a=o.apiSecret,s=o.apiUrlRoot,e.prev=5,e.next=8,this._.apiAccessTokenCache.get(s,i,a);case 8:return c=e.sent,e.next=11,u.dontSellData(s,c,t,n);case 11:return f=e.sent,p=new y(f),e.abrupt("return",p);case 16:throw e.prev=16,e.t0=e.catch(5),new l(400,e.t0);case 19:case"end":return e.stop()}}),e,this,[[5,16]])}))),function(e){return i.apply(this,arguments)})},{key:"config",set:function(e){this._.config=e}}])&&s(t.prototype,n),o&&s(t,o),e}();e.exports=v},function(e,t,n){"use strict";var r=n(10);e.exports={getCampaignInfo:function(e,t,n){r.assertAppearsToBeACampaignId(n);return r.createClient(e,t).request("\n    query getCampaignInfo($campaignId: String!) {\n      campaign(campaign_cursor: $campaignId) {\n        campaign_description {\n          text\n        }\n        campaign_name\n        campaign_cursor\n        campaign_reference\n        campaign_title {\n          text\n        }\n        date_c\n        date_e\n        endpoint\n        status\n      }\n    }\n  ",{campaignId:n}).then((function(e){return{campaign:e.campaign}})).catch((function(e){throw r.transformError(e)}))},getCampaigns:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="\n    query getCampaigns($userCursor: String!, $after: String, $first: Int) {\n      campaigns(user_cursor: $userCursor, after: $after, first: $first) {\n        data {\n          campaign_cursor\n          campaign_name\n          campaign_reference\n          status\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ";return r.createClient(e,t).request(a,{after:o,first:i,userCursor:n}).then((function(e){return e.campaigns})).catch((function(e){throw r.transformError(e)}))},getCampaignIdByRef:function(e,t,n){return r.createClient(e,t).request("\n    query getCampaignId($campaignRef: String!) {\n      campaign(campaign_ref: $campaignRef) {\n        campaign_cursor\n      }\n    }\n  ",{campaignRef:n}).then((function(e){return e.campaign.campaign_cursor})).catch((function(){return""}))}}},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(6),n(19),n(3),n(27),n(5),n(102),n(8),n(9),n(0),n(44),n(72),n(73),n(17);var a=n(18),s=n(10),c=n(163),u=n(164),f=n(165),p=n(74).decryptWithEncryptedPrivateKey;e.exports={confirmConsentChange:function(e,t,n){return s.createClient(e,t).request("\n    mutation confirmConsentChange($consentCursor: String!) {\n      confirm_consent_change(consent_cursor: $consentCursor) {\n        consent_cursor\n      }\n    }\n  ",{consentCursor:n}).then((function(e){return{confirmed:e.confirm_consent_change.consent_cursor===n}})).catch((function(e){throw s.transformError(e)}))},confirmDataDelete:function(e,t,n){return s.createClient(e,t).request("\n    mutation confirmDataDelete($consentCursor: String!) {\n      confirm_consent_deletion(consent_cursor: $consentCursor) {\n        consent_cursor\n      }\n    }\n  ",{consentCursor:n}).then((function(e){return{confirmed:e.confirm_consent_deletion.consent_cursor===n}})).catch((function(e){throw s.transformError(e)}))},declineConsentChange:function(e,t,n){return s.createClient(e,t).request("\n    mutation declineConsentChange($consentCursor: String!) {\n      decline_consent_change(consent_cursor: $consentCursor) {\n        consent_cursor\n      }\n    }\n  ",{consentCursor:n}).then((function(e){return{confirmed:e.decline_consent_change.consent_cursor===n}})).catch((function(e){throw s.transformError(e)}))},getCookieConsent:function(e,t,n,r,o){s.assertAppearsToBeACampaignId(o);return s.createClient(e,t).request("\n    query getCookieConsent($userCursor: String!, $campaignIds: [String!]!, $statuses: [ConsentStatus]) {\n      consents(campaign_owner_cursor: $userCursor, campaign_cursors: $campaignIds, statuses: $statuses) {\n        data {\n          consent_type,\n          request_data_types,\n          user_xcoobee_id,\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ",{campaignIds:[o],statuses:[u.ACTIVE],userCursor:r}).then((function(e){var t,r=e.consents,o=r.data;if(r.page_info.has_next_page)throw a("Too many active consents to be able to determine cookie consents. Please notify XcooBee of this issue.");var s=(i(t={},c.ADVERTISING_COOKIE,!1),i(t,c.APPLICATION_COOKIE,!1),i(t,c.STATISTICS_COOKIE,!1),i(t,c.USAGE_COOKIE,!1),t);return o.forEach((function(e){e.user_xcoobee_id===n&&[f.WEB_APPLICATION_TRACKING,f.WEBSITE_TRACKING].includes(e.consent_type)&&(e.request_data_types.includes(c.ADVERTISING_COOKIE)&&(s[c.ADVERTISING_COOKIE]=!0),e.request_data_types.includes(c.APPLICATION_COOKIE)&&(s[c.APPLICATION_COOKIE]=!0),e.request_data_types.includes(c.STATISTICS_COOKIE)&&(s[c.STATISTICS_COOKIE]=!0),e.request_data_types.includes(c.USAGE_COOKIE)&&(s[c.USAGE_COOKIE]=!0))})),{cookie_consents:s}})).catch((function(e){throw s.transformError(e)}))},getConsentData:function(e,t,n){return s.createClient(e,t).request("\n    query getConsentData($consentCursor: String!) {\n      consent(consent_cursor: $consentCursor) {\n        consent_description\n        consent_details {\n          datatype\n        }\n        consent_name\n        consent_status\n        consent_type\n        date_c\n        date_e\n        request_data_types\n        request_owner\n        required_data_types\n        user_cursor\n        user_display_name\n        user_xcoobee_id\n      }\n    }\n  ",{consentCursor:n}).then((function(e){return{consent:e.consent}})).catch((function(e){throw s.transformError(e)}))},getDataPackage:function(e,t,n,r,i){return s.createClient(e,t).request("\n    query getDataPackage($consentId: String!) {\n      data_package(consent_cursor: $consentId) {\n          data\n      }\n    }\n  ",{consentId:n}).then(function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!i){e.next=2;break}return e.abrupt("return",Promise.all(t.data_package.map(function(){var e=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t.data,r,i);case 2:return n=e.sent,e.abrupt("return",{payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 2:return e.abrupt("return",t.data_package.map((function(e){return{payload:e&&e.data}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw s.transformError(e)}))},listConsents:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a="\n  query listConsents($userCursor: String!, $statuses: [ConsentStatus], $consentTypes: [ConsentType], $dataTypes: [ConsentDatatype], $dateFrom: String, $dateTo: String, $search: String, $country: String, $province: String, $city: String, $first: Int, $after: String) {\n    consents(campaign_owner_cursor: $userCursor, statuses : $statuses, consent_types: $consentTypes, data_types: $dataTypes, date_from: $dateFrom, date_to: $dateTo, search: $search, country: $country, province: $province, city: $city, first: $first, after: $after) {\n        data {\n          consent_cursor\n          user_cursor\n          user_display_name\n          user_xcoobee_id\n          campaign_cursor\n          campaign_status\n          consent_name\n          consent_description\n          consent_status\n          consent_type\n          consent_source\n          consent_details {\n              datatype\n              marker\n              share_hash\n          }\n          date_c\n          date_e\n          date_u\n          date_approved\n          date_deleted\n          update_confirmed\n          deletion_confirmed\n          request_data_types\n          request_data_sections {\n              section_fields {\n                  datatype\n              }\n          }\n          is_data_request\n          user_email_mask\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ",p={after:o,first:i,userCursor:n};if(r.query&&(p.query=r.query),r.country&&(p.country=r.country),r.province&&(p.province=r.province),r.city&&(p.city=r.city),r.dateFrom){if(isNaN(new Date(r.dateFrom)))throw TypeError("Invalid date string given: ".concat(r.dateFrom,"."));p.dateFrom=r.dateFrom}if(r.dateTo){if(isNaN(new Date(r.dateTo)))throw TypeError("Invalid date string given: ".concat(r.dateTo,"."));p.dateTo=r.dateTo}return r.statuses&&Array.isArray(r.statuses)&&(r.statuses.forEach((function(e){if(!u.values.includes(e))throw TypeError("Invalid consent status: ".concat(e,".  Must be one of ").concat(u.values.join(", "),"."))})),p.statuses=r.statuses),r.consentTypes&&Array.isArray(r.consentTypes)&&(r.consentTypes.forEach((function(e){if(!f.values.includes(e))throw TypeError("Invalid consent type: ".concat(e,".  Must be one of ").concat(f.values.join(", "),"."))})),p.consentTypes=r.consentTypes),r.dataTypes&&Array.isArray(r.dataTypes)&&(r.dataTypes.forEach((function(e){if(!c.values.includes(e))throw TypeError("Invalid consent data type: ".concat(e,".  Must be one of ").concat(c.values.join(", "),"."))})),p.dataTypes=r.dataTypes),s.createClient(e,t).request(a,p).then((function(e){return e.consents})).catch((function(e){throw s.transformError(e)}))},resolveXcoobeeId:function(e,t,n){return s.createClient(e,t).request("\n    query resolveXcoobeeId($consentCursor: String!) {\n      consent(consent_cursor: $consentCursor) {\n        user_xcoobee_id\n      }\n    }\n  ",{consentCursor:n}).then((function(e){return e.consent.user_xcoobee_id})).catch((function(e){throw s.transformError(e)}))},requestConsent:function(e,t,n,r,o){return s.createClient(e,t).request("\n    mutation requestConsent($config: AdditionalRequestConfig) {\n      send_consent_request(config: $config) {\n        ref_id\n      }\n    }\n  ",{config:{campaign_cursor:r,reference:o,xcoobee_id:n}}).then((function(e){return{ref_id:e.send_consent_request.ref_id}})).catch((function(e){throw s.transformError(e)}))},registerConsents:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a="\n    mutation registerConsents($config: RegisterConsentsConfig) {\n      register_consents(config: $config) {\n          ref_id\n      }\n    }\n  ";return s.createClient(e,t).request(a,{config:{reference:i,campaign_cursor:n,filename:r,targets:o}}).then((function(e){return e.register_consents.ref_id})).catch((function(e){throw s.transformError(e)}))},setUserDataResponse:function(e,t,n,r,o,i,a){return s.createClient(e,t).request("\n    mutation sendDataResponse($config: SendDataResponseConfig!) {\n      send_data_response(config: $config) {\n          ref_id\n      }\n    }\n  ",{config:{message:n,request_ref:r,target_url:i,event_handler:a,filenames:[o.replace(/^.*[\\\/]/,"")]}}).then((function(e){return e.send_data_response.ref_id})).catch((function(e){throw s.transformError(e)}))},shareConsents:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!r&&!o.length)throw TypeError("Either campaignId or consentIds should be provided");var i="\n    mutation shareConsents($config: ShareConsentsConfig!){\n      share_consents(config: $config){\n        ref_id\n      }\n    }\n  ";return s.createClient(e,t).request(i,{config:{campaign_reference:n,campaign_cursor:r,consent_cursors:o}}).then((function(e){return e.share_consents.ref_id})).catch((function(e){throw s.transformError(e)}))},dontSellData:function(e,t,n,r){return s.createClient(e,t).request("\n    mutation dontSellData($email: String, $dontSell: Boolean){\n      do_not_sell_data(email: $email, dont_sell: $dontSell){\n          user_email\n      }\n    }\n  ",{email:n,dontSell:r}).then((function(){return!0})).catch((function(e){throw s.transformError(e)}))}}},function(e,t,n){"use strict";n(45);var r=Object.freeze(["advertising_cookie","alternate_email","alternate_phone","application_cookie","bank_accounts","biometric_data","browser_details","city","colleagues","country","criminal_conviction","custom","date_of_birth","dental_record","device_identifiers","email","emergency_medical_record","ethnicity_race","family_members","first_name","friends","genetic_data","government_document_references","government_id","health_metrics","health_record","image","internet_access_record","ip_address","last_name","location_data","membership","mental_health_record","meter_reading","middle_name","name_prefix","name_suffix","other1","other2","other3","other4","other5","other6","other7","other8","other9","party_affiliation","phone","physical_health_record","religion","sexual_orientation","social_posts","state","statistics_cookie","street1","street2","twitter_handle","usage_cookie","xcoobee_id"]),o=Object.freeze({ADVERTISING_COOKIE:"advertising_cookie",ALTERNATE_EMAIL:"alternate_email",ALTERNATE_PHONE:"alternate_phone",APPLICATION_COOKIE:"application_cookie",BANK_ACCOUNTS:"bank_accounts",BIOMETRIC_DATA:"biometric_data",BROWSER_DETAILS:"browser_details",CITY:"city",COLLEAGUES:"colleagues",COUNTRY:"country",CRIMINAL_CONVICTION:"criminal_conviction",CUSTOM:"custom",DATE_OF_BIRTH:"date_of_birth",DENTAL_RECORD:"dental_record",DEVICE_IDENTIFIERS:"device_identifiers",EMAIL:"email",EMERGENCY_MEDICAL_RECORD:"emergency_medical_record",ETHNICITY_RACE:"ethnicity_race",FAMILY_MEMBERS:"family_members",FIRST_NAME:"first_name",FRIENDS:"friends",GENETIC_DATA:"genetic_data",GOVERNMENT_DOCUMENT_REFERENCES:"government_document_references",GOVERNMENT_ID:"government_id",HEALTH_METRICS:"health_metrics",HEALTH_RECORD:"health_record",IMAGE:"image",INTERNET_ACCESS_RECORD:"internet_access_record",IP_ADDRESS:"ip_address",LAST_NAME:"last_name",LOCATION_DATA:"location_data",MEMBERSHIP:"membership",MENTAL_HEALTH_RECORD:"mental_health_record",METER_READING:"meter_reading",MIDDLE_NAME:"middle_name",NAME_PREFIX:"name_prefix",NAME_SUFFIX:"name_suffix",OTHER1:"other1",OTHER2:"other2",OTHER3:"other3",OTHER4:"other4",OTHER5:"other5",OTHER6:"other6",OTHER7:"other7",OTHER8:"other8",OTHER9:"other9",PARTY_AFFILIATION:"party_affiliation",PHONE:"phone",PHYSICAL_HEALTH_RECORD:"physical_health_record",RELIGION:"religion",SEXUAL_ORIENTATION:"sexual_orientation",SOCIAL_POSTS:"social_posts",STATE:"state",STATISTICS_COOKIE:"statistics_cookie",STREET1:"street1",STREET2:"street2",TWITTER_HANDLE:"twitter_handle",USAGE_COOKIE:"usage_cookie",XCOOBEE_ID:"xcoobee_id",values:r});e.exports=o},function(e,t,n){"use strict";n(45);var r=Object.freeze(["active","canceled","expired","pending","offer","rejected","updating"]),o=Object.freeze({ACTIVE:"active",CANCELED:"canceled",EXPIRED:"expired",PENDING:"pending",OFFER:"offer",REJECTED:"rejected",UPDATING:"updating",values:r});e.exports=o},function(e,t,n){"use strict";n(45);var r=Object.freeze(["anonymized_data_aggregation","billing","care_delivery","company_information","contractor_management","create_custom_product","create_custom_service","create_custom_service_and_product","data_aggregation","deliver_a_product","deliver_itiniary_changes","emergency_request","emergency_services","employee_administration","employee_management","financial_reports","government_services","health_billing","health_care_services","iot_device_tracking","it_administration","law_enforcement","marketing","missing","mobile_device_tracking","order_fullfillment","other","perform_a_service","perform_contract","press_releaseases","private_consent","product_announcement","product_information","promotion","shipping","supplier_screening","support","support_a_product","support_a_service","survey","training","travel","web_application_tracking","website_tracking"]),o=Object.freeze({ANONYMIZED_DATA_AGGREGATION:"anonymized_data_aggregation",BILLING:"billing",CARE_DELIVERY:"care_delivery",COMPANY_INFORMATION:"company_information",CONTRACTOR_MANAGEMENT:"contractor_management",CREATE_CUSTOM_PRODUCT:"create_custom_product",CREATE_CUSTOM_SERVICE:"create_custom_service",CREATE_CUSTOM_SERVICE_AND_PRODUCT:"create_custom_service_and_product",DATA_AGGREGATION:"data_aggregation",DELIVER_A_PRODUCT:"deliver_a_product",DELIVER_ITINIARY_CHANGES:"deliver_itiniary_changes",EMERGENCY_REQUEST:"emergency_request",EMERGENCY_SERVICES:"emergency_services",EMPLOYEE_ADMINISTRATION:"employee_administration",EMPLOYEE_MANAGEMENT:"employee_management",FINANCIAL_REPORTS:"financial_reports",GOVERNMENT_SERVICES:"government_services",HEALTH_BILLING:"health_billing",HEALTH_CARE_SERVICES:"health_care_services",IOT_DEVICE_TRACKING:"iot_device_tracking",IT_ADMINISTRATION:"it_administration",LAW_ENFORCEMENT:"law_enforcement",MARKETING:"marketing",MISSING:"missing",MOBILE_DEVICE_TRACKING:"mobile_device_tracking",ORDER_FULLFILLMENT:"order_fullfillment",OTHER:"other",PERFORM_A_SERVICE:"perform_a_service",PERFORM_CONTRACT:"perform_contract",PRESS_RELEASEASES:"press_releaseases",PRIVATE_CONSENT:"private_consent",PRODUCT_ANNOUNCEMENT:"product_announcement",PRODUCT_INFORMATION:"product_information",PROMOTION:"promotion",SHIPPING:"shipping",SUPPLIER_SCREENING:"supplier_screening",SUPPORT:"support",SUPPORT_A_PRODUCT:"support_a_product",SUPPORT_A_SERVICE:"support_a_service",SURVEY:"survey",TRAINING:"training",TRAVEL:"travel",WEB_APPLICATION_TRACKING:"web_application_tracking",WEBSITE_TRACKING:"website_tracking",values:r});e.exports=o},function(e,t,n){const r=n(96);let o=null;t.fetchOpenpgp=async()=>new Promise((e,t)=>{o?e(o):r("https://app.xcoobee.net/scripts/sdk/openpgp.worker.min.js").then(e=>e.text()).then(n=>{if(window.openpgp)o=window.openpgp,o.initWorker({path:URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}),e(o);else{const e=Error("Failed to load OpenPgp Checkout library.");t(e)}})})},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(3),n(0),n(6),n(5);var a=n(168),s=n(28),c=n(46),u=n(47),f=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._={apiAccessTokenCache:n,config:t||null,usersCache:r}}var t,n,r,f,p,l;return t=e,(n=[{key:"_assertValidState",value:function(){if(!this._.config)throw TypeError("Illegal State: Default config has not been set yet.")}},{key:"deleteInboxItem",value:(l=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,f,p,l,h,d,y,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:null,this._assertValidState(),r=c.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,f=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(f,o,i);case 7:return p=e.sent,e.next=10,this._.usersCache.get(f,o,i);case 10:return l=e.sent,h=l.cursor,e.next=14,a.deleteInboxItem(f,p,h,t);case 14:return d=e.sent,y=new u(d),e.abrupt("return",y);case 19:throw e.prev=19,e.t0=e.catch(4),new s(400,e.t0);case 22:case"end":return e.stop()}}),e,this,[[4,19]])}))),function(e){return l.apply(this,arguments)})},{key:"getInboxItem",value:(p=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,f,p,l,h,d,y,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>1&&void 0!==v[1]?v[1]:null,this._assertValidState(),r=c.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,f=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(f,o,i);case 7:return p=e.sent,e.next=10,this._.usersCache.get(f,o,i);case 10:return l=e.sent,h=l.cursor,e.next=14,a.getInboxItem(f,p,h,t);case 14:return d=e.sent,y=new u(d),e.abrupt("return",y);case 19:throw e.prev=19,e.t0=e.catch(4),new s(400,e.t0);case 22:case"end":return e.stop()}}),e,this,[[4,19]])}))),function(e){return p.apply(this,arguments)})},{key:"listInbox",value:(f=o(regeneratorRuntime.mark((function e(){var t,n,r,i=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,this._assertValidState(),n=function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,o,s,c,u,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,o=t.apiSecret,s=t.apiUrlRoot,c=n.after,u=n.limit,e.next=4,i._.apiAccessTokenCache.get(s,r,o);case 4:return f=e.sent,e.next=7,a.listInbox(s,f,c,u);case 7:return p=e.sent,e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r=c.resolveApiCfg(t,this._.config),e.abrupt("return",c.startPaging(n,r,{}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"config",set:function(e){this._.config=e}}])&&i(t.prototype,n),r&&i(t,r),e}();e.exports=f},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(30),n(33),n(17),n(21),n(14),n(8),n(9),n(0),n(22),n(6),n(19);var a=n(10);e.exports={deleteInboxItem:function(e,t,n,r){return a.createClient(e,t).request("\n    mutation deleteInboxItem($userCursor: String!, $messageId: String!) {\n      remove_inbox_item(user_cursor: $userCursor, filename: $messageId) {\n        trans_id\n      }\n    }\n  ",{userCursor:n,messageId:r}).then((function(){return!0})).catch((function(e){throw a.transformError(e)}))},getInboxItem:function(e,t,n,r){return a.createClient(e,t).request("\n    query getInboxItem($userCursor: String!, $messageId: String!) {\n      inbox_item(user_cursor: $userCursor, filename: $messageId) {\n        download_link\n        info {\n          date\n          downloaded\n          filename\n          file_size\n          file_tags\n          file_type\n          from\n          from_xcoobee_id\n          original_name\n          sender {\n            from\n            from_xcoobee_id\n            name\n            photo_url\n            validation_score\n          }\n          trans_id\n          trans_name\n          user_ref\n        }\n      }\n    }\n  ",{messageId:r,userCursor:n}).then((function(e){return{inbox_item:e.inbox_item}})).catch((function(e){throw a.transformError(e)}))},listInbox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i="\n    query listInbox($after: String, $first: Int) {\n      inbox(after: $after, first: $first) {\n        data {\n          date\n          downloaded\n          file_size\n          filename\n          original_name\n          sender {\n            from\n            from_xcoobee_id\n            name\n            validation_score\n          }\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ";return a.createClient(e,t).request(i,{after:n,first:r}).then((function(e){var t=e.inbox,n=t.page_info;return{data:t.data.map((function(e){return{messageId:e.filename,fileName:e.original_name,fileSize:e.file_size,sender:o({},e.sender),receiptDate:e.date,downloadDate:e.downloaded,expirationDate:e.date}})),page_info:n}})).catch((function(e){throw a.transformError(e)}))}}},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(6),n(19),n(3),n(27),n(36),n(37),n(8),n(9),n(0),n(22),n(5);var a=n(170),s=n(173),c=n(174),u=n(18),f=n(74).decryptWithEncryptedPrivateKey,p=n(28),l=n(46),h=n(47),d=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._={apiAccessTokenCache:n,config:t||null,usersCache:r}}var t,n,r,d,y,v,g,_,m,b,w,x;return t=e,(n=[{key:"_assertValidState",value:function(){if(!this._.config)throw TypeError("Illegal State: Default config has not been set yet.")}},{key:"addEventSubscriptions",value:(x=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,u,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,this._assertValidState(),r=l.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return s=e.sent,e.next=10,c.addEventSubscriptions(a,s,t);case 10:return u=e.sent,f=new h(u),e.abrupt("return",f);case 15:throw e.prev=15,e.t0=e.catch(4),new p(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return x.apply(this,arguments)})},{key:"deleteEventSubscriptions",value:(w=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,s,u,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,this._assertValidState(),r=l.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,a=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(a,o,i);case 7:return s=e.sent,e.next=10,c.deleteEventSubscriptions(a,s,t);case 10:return u=e.sent,f=new h(u),e.abrupt("return",f);case 15:throw e.prev=15,e.t0=e.catch(4),new p(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return w.apply(this,arguments)})},{key:"getEvents",value:(b=o(regeneratorRuntime.mark((function e(){var t,n,r,i=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,this._assertValidState(),n=function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,o,a,c,u,f,p,l,h,d,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,o=t.apiSecret,a=t.apiUrlRoot,c=t.pgpPassword,u=t.pgpSecret,f=n.after,p=n.limit,e.next=4,i._.apiAccessTokenCache.get(a,r,o);case 4:return l=e.sent,e.next=7,i._.usersCache.get(a,r,o);case 7:return h=e.sent,d=h.cursor,e.next=11,s.getEvents(a,l,d,u,c,f,p);case 11:return y=e.sent,e.abrupt("return",y);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r=l.resolveSdkCfg(t,this._.config),e.abrupt("return",l.startPaging(n,r,{}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"triggerEvent",value:(m=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,c,u,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,this._assertValidState(),r=l.resolveCampaignId(null,n,this._.config),o=l.resolveApiCfg(n,this._.config),i=o.apiKey,a=o.apiSecret,c=o.apiUrlRoot,e.prev=5,e.next=8,this._.apiAccessTokenCache.get(c,i,a);case 8:return u=e.sent,e.next=11,s.triggerEvent(c,u,r,t);case 11:return f=e.sent,e.abrupt("return",new h(f));case 15:throw e.prev=15,e.t0=e.catch(5),new p(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return m.apply(this,arguments)})},{key:"listEventSubscriptions",value:(_=o(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,u,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:null,n=d.length>1&&void 0!==d[1]?d[1]:null,r=d.length>2&&void 0!==d[2]?d[2]:null,this._assertValidState(),o=l.resolveApiCfg(r,this._.config),i=o.apiKey,a=o.apiSecret,s=o.apiUrlRoot,e.prev=6,e.next=9,this._.apiAccessTokenCache.get(s,i,a);case 9:return u=e.sent,e.next=12,c.listEventSubscriptions(s,u,t,n);case 12:return f=e.sent,e.abrupt("return",new h(f));case 16:throw e.prev=16,e.t0=e.catch(6),new p(400,e.t0);case 19:case"end":return e.stop()}}),e,this,[[6,16]])}))),function(){return _.apply(this,arguments)})},{key:"getAvailableSubscriptions",value:(g=o(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,u,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:null,n=d.length>1&&void 0!==d[1]?d[1]:null,r=d.length>2&&void 0!==d[2]?d[2]:null,this._assertValidState(),o=l.resolveApiCfg(r,this._.config),i=o.apiKey,a=o.apiSecret,s=o.apiUrlRoot,e.prev=6,e.next=9,this._.apiAccessTokenCache.get(s,i,a);case 9:return u=e.sent,e.next=12,c.getAvailableSubscriptions(s,u,t,n);case 12:return f=e.sent,e.abrupt("return",new h(f));case 16:throw e.prev=16,e.t0=e.catch(6),new p(400,e.t0);case 19:case"end":return e.stop()}}),e,this,[[6,16]])}))),function(){return g.apply(this,arguments)})},{key:"unsuspendEventSubscription",value:(v=o(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,s,u,f,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:null,this._assertValidState(),o=l.resolveApiCfg(r,this._.config),i=o.apiKey,a=o.apiSecret,s=o.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(s,i,a);case 7:return u=e.sent,e.next=10,c.unsuspendEventSubscription(s,u,t,n);case 10:return f=e.sent,e.abrupt("return",new h(f));case 14:throw e.prev=14,e.t0=e.catch(4),new p(400,e.t0);case 17:case"end":return e.stop()}}),e,this,[[4,14]])}))),function(e,t){return v.apply(this,arguments)})},{key:"ping",value:(y=o(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,this._assertValidState(),n=l.resolveApiCfg(t,this._.config),r=n.apiKey,o=n.apiSecret,i=n.apiUrlRoot,e.prev=4,e.next=7,this._.usersCache.get(i,r,o);case 7:if(!e.sent){e.next=10;break}return e.abrupt("return",new h(!0));case 10:throw new u("User not found.");case 13:throw e.prev=13,e.t0=e.catch(4),new p(400,e.t0);case 16:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(){return y.apply(this,arguments)})},{key:"handleEvents",value:(d=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,s,c,p,h,d,y,v,g,_,m,b=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:[],r=b.length>2&&void 0!==b[2]?b[2]:null,o=b.length>3&&void 0!==b[3]?b[3]:null,Object.keys(t).length){e.next=5;break}throw new TypeError("At least one handler should be passed");case 5:if(null===r||null===o){e.next=22;break}return i=o["XBEE-SIGNATURE"]||o["xbee-signature"]||null,s=o["XBEE-HANDLER"]||o["xbee-handler"]||null,c=l.resolveSdkCfg(null,this._.config),p=c.apiKey,h=c.apiSecret,d=c.apiUrlRoot,y=c.pgpPassword,v=c.pgpSecret,e.next=12,this._.usersCache.get(d,p,h);case 12:if(g=e.sent,a(r,g.xcoobee_id).toString()===i){e.next=16;break}throw new u("Invalid signature");case 16:return _={payload:r,handler:s},e.next=19,f(r,v,y);case 19:m=e.sent,_.payload=m,n.push(_);case 22:return e.abrupt("return",Promise.all(n.map((function(e){if(!e.handler||"function"!=typeof t[e.handler])throw new u("Handler '".concat(e.handler,"' is not defined"));return t[e.handler](e.payload)}))));case 23:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"config",set:function(e){this._.config=e}}])&&i(t.prototype,n),r&&i(t,r),e}();e.exports=d},function(e,t,n){var r;e.exports=(r=n(75),n(171),n(172),r.HmacSHA1)},function(e,t,n){var r,o,i,a,s,c,u,f;e.exports=(f=n(75),o=(r=f).lib,i=o.WordArray,a=o.Hasher,s=r.algo,c=[],u=s.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var f=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=f<<1|f>>>31}var p=(r<<5|r>>>27)+s+c[u];p+=u<20?1518500249+(o&i|~o&a):u<40?1859775393+(o^i^a):u<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,s=a,a=i,i=o<<30|o>>>2,o=r,r=p}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u),f.SHA1)},function(e,t,n){var r,o,i,a;e.exports=(r=n(75),i=(o=r).lib.Base,a=o.enc.Utf8,void(o.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),s=o.words,c=i.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,c,"next",e)}function c(e){a(i,r,o,s,c,"throw",e)}s(void 0)}))}}n(30),n(33),n(17),n(21),n(14),n(22),n(6),n(19),n(3),n(8),n(9),n(0),n(27),n(5);var c=n(74).decryptWithEncryptedPrivateKey,u=n(10);e.exports={getEvents:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p="\n    query getEvents($userCursor: String!, $after: String, $first: Int) {\n      events(user_cursor: $userCursor, after: $after, first: $first) {\n        data {\n          event_id\n          reference_cursor\n          reference_type\n          owner_cursor\n          topic\n          event_type\n          payload\n          hmac\n          date_c\n          response {\n            channel\n            status\n            response\n          }\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ";return u.createClient(e,t).request(p,{after:a,first:f,userCursor:n}).then(function(){var e=s(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.events,!r||!i){e.next=5;break}return e.next=4,Promise.all(n.data.map(function(){var e=s(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t.payload,r,i);case 2:return n=e.sent,e.abrupt("return",o(o({},t),{},{payload:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:n.data=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw u.transformError(e)}))},triggerEvent:function(e,t,n){return u.createClient(e,t).request("\n    mutation sendTestEvent($topic: String) {\n      send_test_event(topic: $topic) {\n        topic\n        payload\n        hmac\n      }\n    }\n  ",{topic:n}).then((function(e){return e.send_test_event})).catch((function(e){throw u.transformError(e)}))}}},function(e,t,n){"use strict";n(19);var r=n(10),o=n(18);e.exports={addEventSubscriptions:function(e,t,n){var i={events:n.map((function(e){if(!e.topic||!e.channel)throw new o("No topic or channel provided");return{topic:e.topic,channel:e.channel,handler:e.handler}}))};return r.createClient(e,t).request("\n    mutation addEventSubscriptions($config: AddSubscriptionsConfig!) {\n      add_event_subscriptions(config: $config) {\n        data {\n          topic\n          channel\n          handler\n          owner_cursor\n          reference_cursor\n          reference_type\n        }\n      }\n    }\n  ",{config:i}).then((function(e){return e.add_event_subscriptions})).catch((function(e){throw r.transformError(e)}))},deleteEventSubscriptions:function(e,t,n){var i={events:n.map((function(e){if(!e.topic||!e.channel)throw new o("No topic or channel provided");return{topic:e.topic,channel:e.channel}}))};return r.createClient(e,t).request("\n    mutation deleteEventSubscriptions($config: DeleteSubscriptionsConfig!) {\n      delete_event_subscriptions(config: $config) {\n        deleted_number\n      }\n    }\n  ",{config:i}).then((function(e){return e.delete_event_subscriptions})).catch((function(e){throw r.transformError(e)}))},listEventSubscriptions:function(e,t,n,o){return r.createClient(e,t).request("{\n    event_subscriptions {\n      data {\n        owner_cursor\n        reference_cursor\n        reference_type\n        topic\n        channel\n        handler\n        date_c\n      }\n    }\n  }",{referenceId:n,referenceType:o}).then((function(e){return e.event_subscriptions})).catch((function(e){throw r.transformError(e)}))},getAvailableSubscriptions:function(e,t,n,o){return r.createClient(e,t).request("query getAvailableSubscriptions($referenceType: EventReferenceType, $referenceId: String) {\n    available_subscriptions (reference_type: $referenceType, reference_cursor: $referenceId) {\n      topic\n      channels\n    }\n  }",{referenceId:n,referenceType:o}).then((function(e){return e.available_subscriptions})).catch((function(e){throw r.transformError(e)}))},unsuspendEventSubscription:function(e,t,n,o){return r.createClient(e,t).request("mutation unsuspendEventSubscriptions($config: EditSubscriptionConfig!) {\n    edit_event_subscription(config: $config) {\n      topic\n      channel\n      status\n    }\n  }",{config:{topic:n,channel:o}}).then((function(e){return e.edit_event_subscription})).catch((function(e){throw r.transformError(e)}))}}},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(3),n(0),n(6),n(5);var a=n(101),s=n(176),c=n(28),u=n(46),f=n(47),p=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._={apiAccessTokenCache:n,config:t||null,usersCache:r}}var t,n,r,p,l,h,d,y;return t=e,(n=[{key:"_assertValidState",value:function(){if(!this._.config)throw TypeError("Illegal State: Default config has not been set yet.")}},{key:"getConversation",value:(y=o(regeneratorRuntime.mark((function e(t){var n,r,i,a=this,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,this._assertValidState(),r=function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,o,i,c,u,f,p,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,o=t.apiSecret,i=t.apiUrlRoot,c=n.after,u=n.limit,f=n.targetCursor,e.next=4,a._.apiAccessTokenCache.get(i,r,o);case 4:return p=e.sent,e.next=7,s.getConversation(i,p,f,c,u);case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=u.resolveApiCfg(n,this._.config),e.abrupt("return",u.startPaging(r,i,{targetCursor:t}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"getConversations",value:(d=o(regeneratorRuntime.mark((function e(){var t,n,r,i=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:null,this._assertValidState(),n=function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,o,a,c,u,f,p,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.apiKey,o=t.apiSecret,a=t.apiUrlRoot,c=n.after,u=n.limit,e.next=4,i._.apiAccessTokenCache.get(a,r,o);case 4:return f=e.sent,e.next=7,i._.usersCache.get(a,r,o);case 7:return p=e.sent,l=p.cursor,e.next=11,s.getConversations(a,f,l,c,u);case 11:return h=e.sent,e.abrupt("return",h);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r=u.resolveApiCfg(t,this._.config),e.abrupt("return",u.startPaging(n,r,{}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getUser",value:(h=o(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:null,this._assertValidState(),n=u.resolveApiCfg(t,this._.config),r=n.apiKey,o=n.apiSecret,i=n.apiUrlRoot,e.prev=4,e.next=7,this._.usersCache.get(i,r,o);case 7:return a=e.sent,s=new f({data:a}),e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(4),new c(400,e.t0);case 15:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(){return h.apply(this,arguments)})},{key:"getUserPublicKey",value:(l=o(regeneratorRuntime.mark((function e(t){var n,r,o,i,s,p,l,h,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,this._assertValidState(),r=u.resolveApiCfg(n,this._.config),o=r.apiKey,i=r.apiSecret,s=r.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(s,o,i);case 7:return p=e.sent,e.next=10,a.getUserPublicKey(s,p,t);case 10:return l=e.sent,h=new f(l),e.abrupt("return",h);case 15:throw e.prev=15,e.t0=e.catch(4),new c(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e){return l.apply(this,arguments)})},{key:"sendUserMessage",value:(p=o(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,p,l,h,d,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:null,this._assertValidState(),o=u.resolveApiCfg(r,this._.config),i=o.apiKey,a=o.apiSecret,p=o.apiUrlRoot,e.prev=4,e.next=7,this._.apiAccessTokenCache.get(p,i,a);case 7:return l=e.sent,e.next=10,s.sendUserMessage(p,l,t,n);case 10:return h=e.sent,d=new f({data:h}),e.abrupt("return",d);case 15:throw e.prev=15,e.t0=e.catch(4),new c(400,e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])}))),function(e,t){return p.apply(this,arguments)})},{key:"config",set:function(e){this._.config=e}}])&&i(t.prototype,n),r&&i(t,r),e}();e.exports=p},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}n(3),n(0),n(5);var o=n(10),i=n(177),a=function(e,t,n,r){return o.createClient(e,t).request("\n    query getNoteTarget($referenceId: String!, $type: NoteType!){\n      note_target (reference_cursor: $referenceId, note_type: $type){\n        cursor\n      }\n    }\n  ",{referenceId:n,type:r}).then((function(e){return e.note_target.cursor})).catch((function(e){throw o.transformError(e)}))},s=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,r){var s,c,u,f,p,l,h,d,y,v,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=g.length>3&&void 0!==g[3]?g[3]:{},c="\n    mutation sendUserMessage($config: SendMessageConfig) {\n      send_message(config: $config) {\n        date_c\n        date_e\n        note_text\n        target_cursor\n        xcoobee_id\n      }\n    }\n  ",u=s.consentId,f=s.ticketId,p=s.requestRef,l=s.complaintRef,!u){e.next=8;break}h=i.CONSENT,d=u,e.next=24;break;case 8:if(!f){e.next=13;break}h=i.TICKET,d=f,e.next=24;break;case 13:if(!p){e.next=18;break}h=i.DATA_REQUEST,d=p,e.next=24;break;case 18:if(!l){e.next=23;break}h=i.COMPLAINT,d=l,e.next=24;break;case 23:throw new TypeError("Only one reference should be provided");case 24:return e.next=26,a(t,n,d,h);case 26:return y=e.sent,v={reference_cursor:d,message:r,note_type:h,user_cursor:y},e.abrupt("return",o.createClient(t,n).request(c,{config:v}).then((function(e){return e.send_message})).catch((function(e){throw o.transformError(e)})));case 29:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();e.exports={getConversation:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="\n    query getConversation($targetCursor: String!, $after: String, $first: Int) {\n      conversation(target_cursor: $targetCursor, after: $after, first: $first) {\n        data {\n          reference_cursor\n          date_c\n          date_e\n          display_city\n          display_country\n          display_name\n          display_province\n          is_outbound\n          note_text\n          note_type\n          photo_url\n          xcoobee_id\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ";return o.createClient(e,t).request(a,{after:r,first:i,targetCursor:n}).then((function(e){return e.conversation})).catch((function(e){throw o.transformError(e)}))},getConversations:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a="\n    query getConversations($userCursor: String!, $after: String, $first: Int) {\n      conversations(user_cursor: $userCursor, after: $after, first: $first) {\n        data {\n          date_c\n          display_name\n          note_type\n          target_cursor\n        }\n        page_info {\n          end_cursor\n          has_next_page\n        }\n      }\n    }\n  ";return o.createClient(e,t).request(a,{after:r,first:i,userCursor:n}).then((function(e){return e.conversations})).catch((function(e){throw o.transformError(e)}))},sendUserMessage:s}},function(e,t,n){"use strict";n(45);var r=Object.freeze(["breach","broadcast","complaint","consent","data_request","ticket"]),o=Object.freeze({BREACH:"breach",BROADCAST:"broadcast",COMPLAINT:"complaint",CONSENT:"consent",DATA_REQUEST:"data_request",TICKET:"ticket",values:r});e.exports=o},function(e,t,n){"use strict";n(19),n(3),n(8),n(9),n(0),n(27);var r=n(104).upload_file,o=n(71).prepareFilePolicyPairs;e.exports={uploadFiles:function(e,t){var n=o(e,t);return Promise.all(n.map((function(e){var t=e.file,n=e.policy;return r(t,n)}))).then((function(){return!0}))}}}]);